<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" href="index.html">üá∫üá∏TuronMarketüá∫üáø</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Men
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="products.html?gender=male&category=clothing">Clothing</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=male&category=shoes">Shoes</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=male&category=sportswear">Sportswear</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=male&category=accessories">Accessories</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Women
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="products.html?gender=female&category=clothing">Clothing</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=female&category=shoes">Shoes</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=female&category=sportswear">Sportswear</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=female&category=accessories">Accessories</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Kids
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="products.html?gender=kids&category=clothing">Clothing</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=kids&category=shoes">Shoes</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=kids&category=sportswear">Sportswear</a></li>
                        <li><a class="dropdown-item" href="products.html?gender=kids&category=accessories">Accessories</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Accessories
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="products.html?category=watches">Watches</a></li>
                        <li><a class="dropdown-item" href="products.html?category=jewelry">Jewelry</a></li>
                        <li><a class="dropdown-item" href="products.html?category=bags">Bags</a></li>
                        <li><a class="dropdown-item" href="products.html?category=sunglasses">Sunglasses</a></li>
                        <li><a class="dropdown-item" href="products.html?category=belts">Belts</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Vitamins
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="products.html?category=vitamins&type=multivitamins">Multivitamins</a></li>
                        <li><a class="dropdown-item" href="products.html?category=vitamins&type=minerals">Minerals</a></li>
                        <li><a class="dropdown-item" href="products.html?category=vitamins&type=supplements">Supplements</a></li>
                        <li><a class="dropdown-item" href="products.html?category=vitamins&type=protein">Protein</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contacts.html">Contact us</a>
                </li>
            </ul>

            <div class="d-flex align-items-center gap-2 flex-wrap" id="navbarActions">
                <!-- Dynamic content will be inserted here by JavaScript -->
            </div>
        </div>
    </div>
</nav>

<!-- Know The Price Modal -->
<div class="modal fade" id="knowPriceModal" tabindex="-1" aria-labelledby="knowPriceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="knowPriceModalLabel">üí∞ Narxni Bilish</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="priceForm">
                    <div class="form-group">
                        <label for="fullName">
                            <span class="icon">üë§</span>Ism va Familiya
                        </label>
                        <input type="text" id="fullName" name="fullName" required placeholder="Ismingiz va familiyangizni kiriting">
                    </div>

                    <div class="form-group">
                        <label for="phoneNumber">
                            <span class="icon">üì±</span>Telefon Raqami
                        </label>
                        <input type="tel" id="phoneNumber" name="phoneNumber" required placeholder="+998901234567">
                    </div>

                    <div class="form-group">
                        <label for="productUrl">
                            <span class="icon">üîó</span>Mahsulot Havolasi (URL)
                        </label>
                        <input type="url" id="productUrl" name="productUrl" required placeholder="https://example.com/product">
                    </div>

                    <div class="form-group">
                        <label for="productName">
                            <span class="icon">üì¶</span>Mahsulot Nomi
                        </label>
                        <textarea id="productName" name="productName" required placeholder="Mahsulot nomini kiriting"></textarea>
                    </div>

                    <button type="submit" class="submit-btn">
                        <span class="btn-text">üì§ So'rov Yuborish</span>
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </button>
                </form>

                <div class="success-message" id="successMessage">
                    ‚úÖ So'rovingiz muvaffaqiyatli yuborildi! Tez orada javob beramiz.
                </div>

                <div class="error-message" id="errorMessage">
                    ‚ùå Xatolik yuz berdi. Iltimos, qayta urinib ko'ring.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Set active nav link based on current page
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    const navLinks = document.querySelectorAll('.nav-link');
    
    navLinks.forEach(link => {
        if (link.getAttribute('href') === currentPage) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });

    // Handle dropdown active states
    const urlParams = new URLSearchParams(window.location.search);
    const gender = urlParams.get('gender');
    const category = urlParams.get('category');

    if (gender || category) {
        const dropdownLinks = document.querySelectorAll('.dropdown-item');
        dropdownLinks.forEach(link => {
            const linkUrl = new URL(link.href);
            const linkParams = new URLSearchParams(linkUrl.search);
            
            if (linkParams.get('gender') === gender && linkParams.get('category') === category) {
                link.classList.add('active');
                link.closest('.nav-item').querySelector('.nav-link').classList.add('active');
            }
        });
    }

    // Add message icon to navbar
    addMessageIcon();
});

// Add message icon to navbar
function addMessageIcon() {
    const navbarActions = document.getElementById('navbarActions');
    const messageButton = document.createElement('button');
    messageButton.className = 'btn btn-outline-primary message-btn';
    messageButton.innerHTML = '<i class="fas fa-comment-dots"></i>';
    messageButton.setAttribute('data-bs-toggle', 'modal');
    messageButton.setAttribute('data-bs-target', '#knowPriceModal');
    messageButton.title = 'Narxni bilish';
    
    // Insert message button before the first child of navbarActions
    navbarActions.insertBefore(messageButton, navbarActions.firstChild);
}
</script>

<style>
.message-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    margin-right: 10px;
}

.message-btn:hover {
    transform: scale(1.1);
    background-color: var(--accent-color);
    color: white;
}

.modal-content {
    border-radius: 15px;
    border: none;
}

.modal-header {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    border-radius: 15px 15px 0 0;
}

.modal-header .btn-close {
    color: white;
    filter: brightness(0) invert(1);
}

.modal-body {
    padding: 20px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
}

.submit-btn {
    width: 100%;
    padding: 12px;
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
}

.success-message,
.error-message {
    display: none;
    padding: 10px;
    border-radius: 8px;
    margin-top: 15px;
    text-align: center;
}

.success-message {
    background-color: #4CAF50;
    color: white;
}

.error-message {
    background-color: #f44336;
    color: white;
}
</style> 